(this["webpackJsonp@brain-juice/frontend"]=this["webpackJsonp@brain-juice/frontend"]||[]).push([[0],{115:function(e,t,a){e.exports=a(176)},170:function(e,t){},175:function(e,t,a){},176:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),l=a.n(c),i=a(32),o=a(17),m=a(225),u=a(227),s=a(24),E=a(10),f=a(212),d=a(214),p=a(55),g=a(210),b=Object(g.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},link:{color:"white",textDecoration:"none"}}}));var h=function(){var e=b();return r.a.createElement("div",{className:e.root},r.a.createElement(f.a,{position:"static"},r.a.createElement(d.a,null,r.a.createElement(p.a,{variant:"h6"},r.a.createElement(s.b,{to:"/",className:e.link},"Brain Juice")))))},j=a(48),v=a(218),O=a(226),S=a(219),y=a(228),x=a(215),C=a(216),w=Object(g.a)({root:{minWidth:275,maxWidth:"70vw",margin:"auto",marginTop:"4em"},title:{fontSize:16}}),T=function(e){var t=e.title,a=e.children,n=w();return r.a.createElement(x.a,{className:n.root},r.a.createElement(C.a,null,r.a.createElement(p.a,{component:"h1",variant:"h5"},t),a))},_=Object(g.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),N=a(54),P=a.n(N),A={BASE_URL:Object({NODE_ENV:"production",PUBLIC_URL:"/brain-juice",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API:"https://mind-juice.herokuapp.com"}).REACT_APP_PORT||"http://localhost:9000"};P.a.defaults.baseURL=A.BASE_URL,P.a.defaults.headers.post["Content-Type"]="application/json";var R=P.a;var k=function(){var e=Object(E.f)(),t=_(),a=Object(n.useState)({name:""}),c=Object(o.a)(a,2),l=c[0],m=c[1],u=Object(n.useState)(!1),s=Object(o.a)(u,2),f=s[0],d=s[1],p=Object(n.useState)(""),g=Object(o.a)(p,2),b=g[0],h=g[1];return r.a.createElement(T,{title:"Starts a new game"},r.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:function(t){var a;(t.preventDefault(),l.name)&&(d(!0),(a=l,R.post("/games",a).then((function(e){return e.data}))).then((function(t){d(!1),e.push("/game/".concat(t.id))})).catch((function(){d(!1),h("There was something wrong when starting the game")})))}},r.a.createElement(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Game name",name:"name",error:!Boolean(l.name),value:l.name,onChange:function(e){var t=e.target,a=t.name,n=t.value;m(Object(i.a)(Object(i.a)({},l),{},Object(j.a)({},a,n)))},autoFocus:!0}),r.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,disabled:f},"Start game"),b&&r.a.createElement(y.a,{severity:"error"},b),f&&r.a.createElement(S.a,{variant:"query"})))},D=a(102),W=a(220),B=a(217),G=a(221),I=a(222),L=a(223),U=a(224),J=a(101),K=a.n(J),q=a(100),F=a.n(q),H=Object(g.a)((function(e){return{root:{display:"flex",alignItems:"center"},gameContainer:{padding:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"90vh"}}})),V=function(e){var t=e.onStartGame,a=e.canStart,n=window.location.href;return r.a.createElement("div",{className:"flex flex-col items-center space-y-10"},r.a.createElement(p.a,{variant:"h5"},"We are waiting for the players to join"),r.a.createElement("p",null,r.a.createElement("img",{src:"/brain-juice/imgs/cat.gif",alt:"Cat gif"})),r.a.createElement("p",null,"You can share this link with your friends to join ",r.a.createElement("b",null,n)),r.a.createElement("p",null,r.a.createElement(v.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",disabled:a,onClick:t},"Start the game")))},z=function(){return r.a.createElement("div",null,"Game has started")},M="player-connected",Y="player-disconnected",Q="players",X="join",Z="game-start",$=F()(A.BASE_URL),ee=function(){var e=H(),t=Object(E.g)().id,a=Object(n.useState)(!1),c=Object(o.a)(a,2),l=c[0],i=c[1],m=Object(n.useState)(!1),u=Object(o.a)(m,2),s=u[0],f=u[1],d=Object(n.useState)([]),g=Object(o.a)(d,2),b=g[0],h=g[1],j=Object(n.useState)({}),v=Object(o.a)(j,2),O=v[0],S=v[1],y=Object(n.useState)(""),x=Object(o.a)(y,2),C=x[0],w=x[1];function T(){$.emit(Z,O)}Object(n.useEffect)((function(){i(!0),$.on(Q,(function(e){console.log("Players connected",e),h(e)})),$.on(M,(function(e){h((function(t){return[].concat(Object(D.a)(t),[e])}))})),$.on(Y,(function(e){console.log("Player disconnected",e),h((function(t){return t.filter((function(t){return t.id!==e.id}))}))})),$.on(Z,(function(){console.log("Game has started"),f(!0)})),function(e){return R.get("".concat("/games","/").concat(e)).then((function(e){return e.data}))}(t).then((function(e){i(!1),S(e);var t="Player "+(new Date).getTime();w(t),$.emit(X,{game:e,player:{name:t}})})).catch((function(){i(!1)}))}),[t]);var _=function(){return r.a.createElement(W.a,{container:!0,spacing:2},r.a.createElement(W.a,{item:!0,xs:3},r.a.createElement(p.a,{variant:"h5",className:"p-5"},O.name),r.a.createElement(B.a,null,b.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.name},r.a.createElement(G.a,{button:!0,disabled:e.name===C},r.a.createElement(I.a,null,r.a.createElement(K.a,null)),r.a.createElement(L.a,{primary:e.name})),r.a.createElement(U.a,null))})))),r.a.createElement(W.a,{item:!0,xs:9,className:e.gameContainer},s?r.a.createElement(z,null):r.a.createElement(V,{onStartGame:T,canStart:b.length<2})))};return r.a.createElement("div",{className:e.root},l||r.a.createElement(_,null))},te=Object(g.a)((function(e){return{content:{padding:e.spacing(5)},item:{textAlign:"center"}}}));var ae=function(){var e=te();return r.a.createElement(T,{title:"Choose an option"},r.a.createElement(W.a,{container:!0,className:e.content},r.a.createElement(W.a,{item:!0,xs:6,className:e.item},r.a.createElement(v.a,{variant:"contained",color:"primary",component:s.b,to:"/start"},"Start a game")),r.a.createElement(W.a,{item:!0,xs:6,className:e.item},r.a.createElement(v.a,{variant:"contained",color:"secondary",component:s.b,to:"/enter"},"Enter a game"))))},ne={game:{name:""},players:[]},re=n.createContext({state:ne,setState:function(e){return e}});a(175);var ce=function(){var e=Object(n.useState)(ne),t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement(s.a,null,r.a.createElement(re.Provider,{value:{setState:function(e){c(Object(i.a)(Object(i.a)({},a),e))},state:a}},r.a.createElement(m.a,null),r.a.createElement(h,null),r.a.createElement(u.a,null,r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/game/:id"},r.a.createElement(ee,null)),r.a.createElement(E.a,{path:"/start"},r.a.createElement(k,null)),r.a.createElement(E.a,{path:"/"},r.a.createElement(ae,null))))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ce,null)),document.getElementById("root"))}},[[115,1,2]]]);
//# sourceMappingURL=main.d4b4b487.chunk.js.map